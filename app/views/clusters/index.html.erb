  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-3 col-md-2 sidebar">
        <ul class="nav nav-sidebar" role="tablist">
          <% @names.each_with_index do |name, index| %>
          <li<%= ' class=active' if index.zero? %>>
            <a href="#cluster<%= index + 1 %>" role="tab" data-toggle="tab">Cluster <%= index + 1 %> (<%= name %>)</a>
            <ul class="nav nav-subsidebar">
              <li><span><%= pluralize(@data[index][:slots], 'place', 'places') %> disponible</span></li>
            </ul>
          </li>
          <% end %>
        </ul>
      </div>
      <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main-content">
        <%= render 'layouts/notice' %>
        <!--div class="alert alert-info alert-dismissible" role="alert">
          <strong class="text-uppercase">Nous développons actuellement en direct, ceci pourrait provoquer quelques dysfonctionnements !</strong>
        </div-->
        <!--div class="alert alert-success alert-dismissible" role="alert">
          <strong class="text-uppercase">Le système pour signaler tout défaut sur un iMac est désormais fonctionnel !</strong>
        </div-->
        <!--div class="alert alert-danger alert-dismissible" role="alert">
          <strong class="text-uppercase">Suite à un problème technique les données ne sont plus mise à jour, il sera réglé sous peu.</strong>
        </div-->
        <div id="myAlert" class="alert alert-dismissible hide" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <span></span>
        </div>
        <div class="tab-content">
          <% @names.each_with_index do |name, index| %>
          <div class="tab-pane fade<%= ' in active' if index.zero? %>" id="cluster<%= index + 1 %>">
            <div class="page-header">
              <h1>Cluster <%= index + 1 %> (<%= name %>)</h1>
            </div>
            <div class="table table-responsive table-cluster">
              <table class="table">
                <thead>
                  <tr>
                    <th>#</th>
                    <% col_num = 0 %>
                    <% @maps[index][1].each do |station_value| %>
                    <% if station_value == 'x' || station_value == 'o' || station_value == '-' %>
                    <th><%= col_num += 1 %></th>
                    <% else %>
                    <th>&nbsp;</th>
                    <% end %>
                    <% end %>
                  </tr>
                </thead>
                <tbody>
                  <% @maps[index].each_with_index do |row_value, row_index| %>
                  <tr>
                    <td><%= row_index + 1 %></td>
                    <% row_value.each_with_index do |station_value, station_index| %>
                    <% if station_value == 'x' || station_value == '-' %>
                    <% class_name = ['station'];
                    if station_index == 0 || (row_value[station_index - 1] != 'x' && row_value[station_index - 1] != '-')
                      class_name << 'block-begin'
                    elsif station_index == (row_value.length - 1) || (row_value[station_index + 1] != 'x' && row_value[station_index + 1] != '-')
                      class_name << 'block-end'
                    elsif (row_value[station_index - 1] == 'x' || row_value[station_index - 1] == '-') && (row_value[station_index + 1] == 'x' || row_value[station_index + 1] == '-')
                      class_name << 'block-middle'
                    end
                    %>
                    <% if station_value == 'x' %>
                    <% parent_data, childen_data = {}, {}
                    if client = @data[index][:users]["e#{index + 1}r#{row_index + 1}p#{station_index + 1}"]
                      class_name << 'station-success'
                      parent_data = { login: client.login, 'last-activity': '', avatar: 'https://cdn.intra.42.fr/userprofil/' + client.login + '.jpg' };
                      childen_data = { title: client.display_name || '', placement: 'auto' };
                    else
                      class_name << 'station-default'
                    end %>
                    <td id="e<%= index + 1 %>r<%= row_index + 1 %>p<%= station_index + 1 %>"<%= parent_data.map { |name, value| 'data-' + name.to_s + '="' + value + '"' }.join(' ').html_safe %>>
                      <div class="<%= class_name.join ' ' %>"<%= childen_data.map { |name, value| 'data-' + name.to_s + '="' + value + '"' }.join(' ').html_safe %>><span class="glyphicon glyphicon-phone"></span>&nbsp;</div>
                    </td>
                    <% elsif station_value == '-' %>
                    <% class_name << 'station-default' %>
                    <td id="e<%= index + 1 %>r<%= row_index + 1 %>p<%= station_index + 1 %>">
                      <div class="<%= class_name.join ' ' %>">&nbsp;</div>
                    </td>
                    <% end %>
                    <% elsif station_value == 'o' %>
                    <td>
                      <div class="block-begin block-end station station-obstacle">&nbsp;</div>
                    </td>
                    <% elsif station_value == '.' %>
                    <td class="space">&nbsp;</td>
                    <% end %>
                    <% end %>
                  </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>